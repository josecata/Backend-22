(()=>{"use strict";var e,r,o,t,s,a,n,d={983:(e,r,o)=>{o.a(e,(async(e,t)=>{try{let e,s;o.d(r,{F:()=>s,p:()=>e}),o(81);const{default:a}=await o.e(516).then(o.bind(o,516)),{default:n}=await o.e(917).then(o.bind(o,917));s=new a,e=new n,t()}catch(e){t(e)}}),1)},913:(e,r,o)=>{o.d(r,{Z:()=>t});const t={fileSystem:{path:"./controllers"},mongodb:{path:"mongodb+srv://julian:yYh1YRWZiJ0EcbHi@cluster0.ovaqa.mongodb.net/myFirstDatabase?retryWrites=true"}}},695:(e,r,o)=>{o.a(e,(async(e,t)=>{try{o.d(r,{W:()=>u,t:()=>l});var s=o(860),a=o(986),n=o.n(a),d=o(983),i=e([d]);d=(i.then?(await i)():i)[0];const c=!0,u=(0,s.Router)();u.use(n().json()),u.route("/api/productos/:id?").get((async(e,r,o)=>{let t;if(t=e.body.id?Number(e.body.id):Number(e.params.id),t){const e=await d.p.getById(t);e?r.status(200).json(e):r.status(404).json({error:" Error with ID "})}else{const e=await d.p.getAll();e?r.status(200).json(e):r.status(404)}})).post((async(e,r)=>{if(c)if(e.params.id)r.status(400).json({error:" No se puede crear un producto con un id"});else{const o=e.body,t=d.p.save(o);r.status(200).json(`El producto ${e.body.nombre} con el id ${t} se generó correctamente`)}else r.status(401).json({error:-1,descripcion:"Permisos denegados"})})).put((async(e,r)=>{if(c){const o=e.body;let t;t=e.body.id?Number(e.body.id):Number(e.params.id),d.p.modifyById(o,t).then((e=>e?r.status(202).json("Producto modificado"):r.status(404).json("No se encontró el producto")))}else r.status(401).json({error:-1,descripcion:"Permisos denegados"})})).delete((async(e,r)=>{if(c){let o;o=e.body.id?Number(e.body.id):Number(e.params.id),d.p.deleteById(o).then((e=>e?r.status(202).json("Producto eliminado"):r.status(404).json({error:"El producto no existe"})))}else r.status(401).json({error:-1,descripcion:"Permisos denegados"})}));const l=(0,s.Router)();l.use(n().json()),l.route("/api/carrito/:id?").post((async(e,r)=>{if(e.params.id)r.status(400).json({error:"No se puede crear un carrito con ID manual"});else{const e=await d.F.create();r.status(200).json(e)}})).delete((async(e,r)=>{let o;o=e.body.id?Number(e.body.id):Number(e.params.id),d.F.deleteCartById(o).then((e=>e?r.status(202).json("Carrito eliminado"):r.status(404).json("No se encontró el carrito")))})),l.route("/api/carrito/:id?/productos").get((async(e,r)=>{let o;if(o=e.body.id?Number(e.body.id):Number(e.params.id),o){const e=await d.F.getAllProdById(o);e?r.status(200).json(e):r.status(404).json({error:"No se encontró el carrito solicitado"})}else r.status(404).json({error:"Es necesario un ID para buscar el carrito"})})).post((async(e,r)=>{let o;o=e.body.id?Number(e.body.id):Number(e.params.id);let t=Number(e.body.id_prod);const s=await d.p.getById(t);d.F.addProduct(o,s),r.status(202).json("El producto fue agregado al carrito.")})),l.delete("/api/carrito/:id?/productos/:id_prod",(async(e,r)=>{let o,t;e.body.id?(o=Number(e.body.id),t=Number(e.body.id_prod)):(o=Number(e.params.id),t=Number(e.params.id_prod)),await d.F.deleteProdById(o,t)?r.status(202).json("El producto fue eliminado"):r.status(400).json("No se encontró el producto a eliminar")})),t()}catch(e){t(e)}}))},818:(e,r,o)=>{o.d(r,{W:()=>i});var t=o(860),s=o(913),a=o(185);(async()=>{await(0,a.connect)(s.Z.mongodb.path)})().catch((e=>{throw console.log(e),new Error("error con mongoose")}));const n=new a.Schema({author:{id:{type:Number,required:!0},firstName:{type:String,required:!0,max:50},lastName:{type:String,required:!0,max:50},age:{type:Number,required:!0},alias:{type:String,required:!0,max:20},avatar:{type:String,required:!0}},text:{type:String,required:!0,max:500}}),d=(0,a.model)("messages",n),i=(0,t.Router)();i.route("/chat").get((async(e,r)=>{const o=await(async()=>{try{return await d.find()}catch(e){throw console.log(e),new Error("Error")}})();console.log(`Mensajes encontrados: ${o}`),o.length>0?r.status(200).json(o):r.status(404).json({error:"No messagess"})})).post((async(e,r)=>{console.log(e.body);const o=e.body;console.log(`Mensaje a subir: ${o}`),(async e=>{const r=new d(e);console.log(r);try{r.save()}catch(e){throw console.log(e),new Error("Error")}})(o),r.status(202).json({OK:"Mensaje subido"})}))},943:(e,r,o)=>{o.d(r,{Z:()=>d});var t=o(860);const s=require("@faker-js/faker");o(81);const a=Number(process.env.qty),n=(0,t.Router)();n.route("/productos-test").get((async(e,r)=>{const o=await(async()=>{let e=[];for(let r=0;r<a;r++){const r={name:s.faker.commerce.productName(),price:Number(s.faker.commerce.price()),image:s.faker.image.imageUrl()};e.push(r)}return e})();o.length>0?r.status(200).json(o):r.status(404).send({message:"Products Not Found"})}));const d=n},728:(e,r,o)=>{o.a(e,(async(e,r)=>{try{var t=o(860),s=o.n(t),a=o(986),n=o.n(a),d=o(695),i=o(943),c=o(582),u=o.n(c),l=o(818),p=e([d]);d=(p.then?(await p)():p)[0];const m=s()();m.use(u()()),m.use(s().urlencoded({extended:!0})),m.use(d.W),m.use(d.t),m.use(i.Z),m.use(l.W),m.use(n().json());const y=process.env.PORT||8080;m.listen(y,(()=>{console.log(`Contectando al puerto: ${y}`)})),r()}catch(e){r(e)}}))},986:e=>{e.exports=require("body-parser")},582:e=>{e.exports=require("cors")},81:e=>{e.exports=require("dotenv/config")},860:e=>{e.exports=require("express")},185:e=>{e.exports=require("mongoose")}},i={};function c(e){var r=i[e];if(void 0!==r)return r.exports;var o=i[e]={exports:{}};return d[e](o,o.exports,c),o.exports}c.m=d,e="function"==typeof Symbol?Symbol("webpack then"):"__webpack_then__",r="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",o="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",t=e=>{e&&(e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},s=e=>!--e.r&&e(),a=(e,r)=>e?e.push(r):s(r),c.a=(n,d,i)=>{var c,u,l,p=i&&[],m=n.exports,y=!0,b=!1,f=(r,o,t)=>{b||(b=!0,o.r+=r.length,r.map(((r,s)=>r[e](o,t))),b=!1)},g=new Promise(((e,r)=>{l=r,u=()=>(e(m),t(p),p=0)}));g[r]=m,g[e]=(e,r)=>{if(y)return s(e);c&&f(c,e,r),a(p,e),g.catch(r)},n.exports=g,d((n=>{var d;c=(n=>n.map((n=>{if(null!==n&&"object"==typeof n){if(n[e])return n;if(n.then){var d=[];n.then((e=>{i[r]=e,t(d),d=0}),(e=>{i[o]=e,t(d),d=0}));var i={};return i[e]=(e,r)=>(a(d,e),n.catch(r)),i}}var c={};return c[e]=e=>s(e),c[r]=n,c})))(n);var i=()=>c.map((e=>{if(e[o])throw e[o];return e[r]})),u=new Promise(((e,r)=>{(d=()=>e(i)).r=0,f(c,d,r)}));return d.r?u:i()}),(e=>(e&&l(g[o]=e),u()))),y=!1},c.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return c.d(r,{a:r}),r},c.d=(e,r)=>{for(var o in r)c.o(r,o)&&!c.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:r[o]})},c.f={},c.e=e=>Promise.all(Object.keys(c.f).reduce(((r,o)=>(c.f[o](e,r),r)),[])),c.u=e=>e+".main.js",c.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n={179:1},c.f.require=(e,r)=>{n[e]||(e=>{var r=e.modules,o=e.ids,t=e.runtime;for(var s in r)c.o(r,s)&&(c.m[s]=r[s]);t&&t(c);for(var a=0;a<o.length;a++)n[o[a]]=1})(require("./"+c.u(e)))},c(728)})();